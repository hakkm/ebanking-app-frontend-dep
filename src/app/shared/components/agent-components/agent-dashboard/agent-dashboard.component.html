<!--&lt;!&ndash; Enhanced Agent Dashboard Component HTML &ndash;&gt;-->
<!--<div class="min-h-screen bg-gray-950 p-6">-->
<!--  &lt;!&ndash; Overview Cards with Premium Styling &ndash;&gt;-->
<!--  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">-->

<!--    &lt;!&ndash; Transactions Today Card &ndash;&gt;-->
<!--    <div class="group relative p-6 rounded-xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700 shadow-xl hover:shadow-[0_8px_32px_rgba(79,70,229,0.2)] transition-all duration-300 hover:scale-[1.02] cursor-pointer">-->
<!--      <div class="absolute inset-0 bg-gradient-to-br from-indigo-600/10 to-transparent rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>-->
<!--      <div class="relative">-->
<!--        <div class="flex items-center justify-between mb-3">-->
<!--          <h3 class="text-sm font-medium text-gray-300">Transactions Today</h3>-->
<!--          <div class="p-2 bg-indigo-600/20 rounded-lg">-->
<!--            <svg class="w-5 h-5 text-indigo-400" fill="currentColor" viewBox="0 0 24 24">-->
<!--              <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>-->
<!--            </svg>-->
<!--          </div>-->
<!--        </div>-->
<!--        <p class="text-3xl font-bold text-white mb-2">125</p>-->
<!--        <div class="flex items-center space-x-2">-->
<!--          <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-600/20 text-green-400 border border-green-600/30">-->
<!--            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 24 24">-->
<!--              <path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"/>-->
<!--            </svg>-->
<!--            3.2% this week-->
<!--          </span>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Subscribed Users Card &ndash;&gt;-->
<!--    <div class="group relative p-6 rounded-xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700 shadow-xl hover:shadow-[0_8px_32px_rgba(34,197,94,0.2)] transition-all duration-300 hover:scale-[1.02] cursor-pointer">-->
<!--      <div class="absolute inset-0 bg-gradient-to-br from-green-600/10 to-transparent rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>-->
<!--      <div class="relative">-->
<!--        <div class="flex items-center justify-between mb-3">-->
<!--          <h3 class="text-sm font-medium text-gray-300">Subscribed Users</h3>-->
<!--          <div class="p-2 bg-green-600/20 rounded-lg">-->
<!--            <svg class="w-5 h-5 text-green-400" fill="currentColor" viewBox="0 0 24 24">-->
<!--              <path d="M12 12.75c1.63 0 3.07.39 4.24.9 1.08.48 1.76 1.56 1.76 2.73V18H6v-1.61c0-1.18.68-2.26 1.76-2.73 1.17-.52 2.61-.91 4.24-.91zM4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58A2.01 2.01 0 0 0 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29zM20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm4 3.43c0-.81-.48-1.53-1.22-1.85A6.95 6.95 0 0 0 20 14c-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24v-1.57zM12 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"/>-->
<!--            </svg>-->
<!--          </div>-->
<!--        </div>-->
<!--        <p class="text-3xl font-bold text-white mb-2">500</p>-->
<!--        <div class="w-full bg-gray-700 rounded-full h-2">-->
<!--          <div class="bg-gradient-to-r from-green-600 to-green-500 h-2 rounded-full transition-all duration-500" style="width: 85%"></div>-->
<!--        </div>-->
<!--        <p class="text-xs text-gray-400 mt-2">85% of target</p>-->
<!--      </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Internal Transactions Card &ndash;&gt;-->
<!--    <div class="group relative p-6 rounded-xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700 shadow-xl hover:shadow-[0_8px_32px_rgba(59,130,246,0.2)] transition-all duration-300 hover:scale-[1.02] cursor-pointer">-->
<!--      <div class="absolute inset-0 bg-gradient-to-br from-blue-600/10 to-transparent rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>-->
<!--      <div class="relative">-->
<!--        <div class="flex items-center justify-between mb-3">-->
<!--          <h3 class="text-sm font-medium text-gray-300">Internal Transactions</h3>-->
<!--          <div class="p-2 bg-blue-600/20 rounded-lg">-->
<!--            <svg class="w-5 h-5 text-blue-400" fill="currentColor" viewBox="0 0 24 24">-->
<!--              <path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"/>-->
<!--            </svg>-->
<!--          </div>-->
<!--        </div>-->
<!--        <p class="text-3xl font-bold text-white mb-2">75</p>-->
<!--        <div class="flex items-center space-x-2">-->
<!--          <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-600/20 text-yellow-400 border border-yellow-600/30">-->
<!--            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 24 24">-->
<!--              <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>-->
<!--              <path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>-->
<!--            </svg>-->
<!--            Due in 3 days-->
<!--          </span>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; External Transactions Card &ndash;&gt;-->
<!--    <div class="group relative p-6 rounded-xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700 shadow-xl hover:shadow-[0_8px_32px_rgba(147,51,234,0.2)] transition-all duration-300 hover:scale-[1.02] cursor-pointer">-->
<!--      <div class="absolute inset-0 bg-gradient-to-br from-purple-600/10 to-transparent rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>-->
<!--      <div class="relative">-->
<!--        <div class="flex items-center justify-between mb-3">-->
<!--          <h3 class="text-sm font-medium text-gray-300">External Transactions</h3>-->
<!--          <div class="p-2 bg-purple-600/20 rounded-lg">-->
<!--            <svg class="w-5 h-5 text-purple-400" fill="currentColor" viewBox="0 0 24 24">-->
<!--              <path d="M9.01 14H2v2h7.01v3L13 15l-3.99-4v3zm5.98-1v-3H22V8h-7.01V5L11 9l3.99 4z"/>-->
<!--            </svg>-->
<!--          </div>-->
<!--        </div>-->
<!--        <p class="text-3xl font-bold text-white mb-2">50</p>-->
<!--        <p class="text-xs text-gray-400">Last updated: 5 mins ago</p>-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->

<!--  &lt;!&ndash; Transaction History and Quick Actions &ndash;&gt;-->
<!--  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">-->

<!--    &lt;!&ndash; Transaction History Graph &ndash;&gt;-->
<!--    <div class="lg:col-span-2 p-6 rounded-xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700 shadow-xl backdrop-blur-sm">-->
<!--      <div class="flex items-center justify-between mb-6">-->
<!--        <h3 class="text-lg font-semibold text-white">Transaction History</h3>-->
<!--        <div class="flex items-center space-x-2">-->
<!--          <span class="text-sm text-gray-400">Last 7 Days</span>-->
<!--          <div class="p-1 bg-indigo-600/20 rounded-lg">-->
<!--            <svg class="w-4 h-4 text-indigo-400" fill="currentColor" viewBox="0 0 24 24">-->
<!--              <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>-->
<!--            </svg>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->
<!--      <div class="relative">-->
<!--        <canvas #transactionChart class="w-full h-64"></canvas>-->
<!--      </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Quick Actions &ndash;&gt;-->
<!--    <div class="p-6 rounded-xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700 shadow-xl backdrop-blur-sm">-->
<!--      <div class="flex items-center justify-between mb-6">-->
<!--        <h3 class="text-lg font-semibold text-white">Quick Actions</h3>-->
<!--        <div class="p-1 bg-indigo-600/20 rounded-md">-->
<!--          <svg class="w-4 h-4 text-indigo-400" fill="currentColor" viewBox="0 0 24 24">-->
<!--            <path d="M7 2v11h3v9l7-12h-4l3-8z"/>-->
<!--          </svg>-->
<!--        </div>-->
<!--      </div>-->
<!--      <div class="grid grid-cols-2 gap-4">-->
<!--        <button (click)="createUser()" class="group relative p-4 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 transform shadow-lg hover:shadow-[0_8px_32px_rgba(79,70,229,0.3)]">-->
<!--          <div class="flex flex-col items-center space-y-2">-->
<!--            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">-->
<!--              <path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>-->
<!--            </svg>-->
<!--            <span class="text-xs font-medium text-white">Create User</span>-->
<!--          </div>-->
<!--        </button>-->

<!--        <button (click)="closeAccount()" class="group relative p-4 bg-gradient-to-r from-red-600 to-red-700 rounded-lg hover:from-red-700 hover:to-red-800 transition-all duration-200 transform shadow-lg hover:shadow-[0_8px_32px_rgba(220,38,38,0.3)]">-->
<!--          <div class="flex flex-col items-center space-y-2">-->
<!--            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">-->
<!--              <path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"/>-->
<!--            </svg>-->
<!--            <span class="text-xs font-medium text-white">Close Account</span>-->
<!--          </div>-->
<!--        </button>-->

<!--        <button (click)="viewTransactions()" class="group relative p-4 bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 transform shadow-lg hover:shadow-[0_8px_32px_rgba(37,99,235,0.3)]">-->
<!--          <div class="flex flex-col items-center space-y-2">-->
<!--            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">-->
<!--              <path d="M19.5 3.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2L7.5 3.5L6 2v14H3v3c0 1.66 1.34 3 3 3h12c1.66 0 3-1.34 3-3V2l-1.5 1.5zM19 19c0 .55-.45 1-1 1s-1-.45-1-1v-3H8V5h11v14z"/>-->
<!--              <path d="M9 7h6v2H9zm0 4h6v2H9z"/>-->
<!--            </svg>-->
<!--            <span class="text-xs font-medium text-white">Transactions</span>-->
<!--          </div>-->
<!--        </button>-->

<!--        <button (click)="viewUsers()" class="group relative p-4 bg-gradient-to-r from-green-600 to-green-700 rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 transform shadow-lg hover:shadow-[0_8px_32px_rgba(34,197,94,0.3)]">-->
<!--          <div class="flex flex-col items-center space-y-2">-->
<!--            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">-->
<!--              <path d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm4 18v-6h2.5l-2.54-7.63A1.5 1.5 0 0 0 18.54 8H17.5c-.8 0-1.54.37-2.01 1.01l-.7 1.05A6.49 6.49 0 0 0 9.5 8C7.01 8 5 10.01 5 12.5S7.01 17 9.5 17c.17 0 .33-.02.5-.05V22h2v-6.5h1.5V22h2v-6.5H18V22h2zM9.5 15C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10s2.5 1.12 2.5 2.5S10.88 15 9.5 15z"/>-->
<!--            </svg>-->
<!--            <span class="text-xs font-medium text-white">View Users</span>-->
<!--          </div>-->
<!--        </button>-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->

<!--  &lt;!&ndash; Recent Users &ndash;&gt;-->
<!--  <div class="p-6 rounded-xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700 shadow-xl backdrop-blur-sm">-->
<!--    <div class="flex items-center justify-between mb-6">-->
<!--      <h3 class="text-lg font-semibold text-white">Recent Users</h3>-->
<!--      <a href="#" class="inline-flex items-center text-indigo-400 text-sm hover:text-indigo-300 transition-colors duration-200 group">-->
<!--        View All-->
<!--        <svg class="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform duration-200" fill="currentColor" viewBox="0 0 24 24">-->
<!--          <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>-->
<!--        </svg>-->
<!--      </a>-->
<!--    </div>-->

<!--    <div class="space-y-3">-->
<!--      <div *ngFor="let user of recentUsers; trackBy: trackByUserId"-->
<!--           class="group flex items-center justify-between p-4 rounded-lg bg-gray-800/50 border border-gray-700/50 hover:bg-gray-800/80 hover:border-gray-600 transition-all duration-200 cursor-pointer">-->
<!--        <div class="flex items-center space-x-4">-->
<!--          <div class="relative">-->
<!--            <div class="w-10 h-10 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-full flex items-center justify-center">-->
<!--              <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24">-->
<!--                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>-->
<!--              </svg>-->
<!--            </div>-->
<!--            <div class="absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-gray-900 flex items-center justify-center">-->
<!--              <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>-->
<!--            </div>-->
<!--          </div>-->
<!--          <div>-->
<!--            <p class="text-white font-medium">{{ user.name }}</p>-->
<!--            <p class="text-gray-400 text-sm">{{ user.email }}</p>-->
<!--          </div>-->
<!--        </div>-->
<!--        <div class="text-right">-->
<!--          <p class="text-gray-300 text-sm">Joined: {{ user.joinDate }}</p>-->
<!--          <div class="flex items-center space-x-2 mt-1">-->
<!--            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-600/20 text-green-400 border border-green-600/30">-->
<!--              Active-->
<!--            </span>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->




<!-- Enhanced Dynamic Agent Dashboard Component HTML -->
<div class="min-h-screen bg-gray-950 p-6">
  <!-- Overview Cards with Dynamic Data -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">

    <!-- Transactions Today Card -->
    <div class="group relative p-6 rounded-xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700 shadow-xl hover:shadow-[0_8px_32px_rgba(79,70,229,0.2)] transition-all duration-300 hover:scale-[1.02] cursor-pointer">
      <div class="absolute inset-0 bg-gradient-to-br from-indigo-600/10 to-transparent rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative">
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-sm font-medium text-gray-300">Transactions Today</h3>
          <div class="p-2 bg-indigo-600/20 rounded-lg">
            <svg class="w-5 h-5 text-indigo-400" fill="currentColor" viewBox="0 0 24 24">
              <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
            </svg>
          </div>
        </div>

        <!-- Loading State -->
        <div *ngIf="isLoadingStats" class="animate-pulse">
          <div class="h-8 bg-gray-700 rounded mb-2"></div>
          <div class="h-6 bg-gray-700 rounded w-3/4"></div>
        </div>

        <!-- Loaded Data -->
        <div *ngIf="!isLoadingStats">
          <p class="text-3xl font-bold text-white mb-2">{{ dashboardStats.transactionsToday }}</p>
          <div class="flex items-center space-x-2">
            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-600/20 text-green-400 border border-green-600/30">
              <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 24 24">
                <path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"/>
              </svg>
              3.2% this week
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Subscribed Users Card -->
    <div class="group relative p-6 rounded-xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700 shadow-xl hover:shadow-[0_8px_32px_rgba(34,197,94,0.2)] transition-all duration-300 hover:scale-[1.02] cursor-pointer">
      <div class="absolute inset-0 bg-gradient-to-br from-green-600/10 to-transparent rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative">
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-sm font-medium text-gray-300">Subscribed Users</h3>
          <div class="p-2 bg-green-600/20 rounded-lg">
            <svg class="w-5 h-5 text-green-400" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 12.75c1.63 0 3.07.39 4.24.9 1.08.48 1.76 1.56 1.76 2.73V18H6v-1.61c0-1.18.68-2.26 1.76-2.73 1.17-.52 2.61-.91 4.24-.91zM4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58A2.01 2.01 0 0 0 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29zM20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm4 3.43c0-.81-.48-1.53-1.22-1.85A6.95 6.95 0 0 0 20 14c-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24v-1.57zM12 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"/>
            </svg>
          </div>
        </div>

        <!-- Loading State -->
        <div *ngIf="isLoadingStats" class="animate-pulse">
          <div class="h-8 bg-gray-700 rounded mb-2"></div>
          <div class="h-2 bg-gray-700 rounded mb-2"></div>
          <div class="h-4 bg-gray-700 rounded w-1/2"></div>
        </div>

        <!-- Loaded Data -->
        <div *ngIf="!isLoadingStats">
          <p class="text-3xl font-bold text-white mb-2">{{ dashboardStats.subscribedUsers }}</p>
          <div class="w-full bg-gray-700 rounded-full h-2">
            <div class="bg-gradient-to-r from-green-600 to-green-500 h-2 rounded-full transition-all duration-500"
                 [style]="getTargetProgressStyle()"></div>
          </div>
          <p class="text-xs text-gray-400 mt-2">{{ dashboardStats.targetProgress }}% of target</p>
        </div>
      </div>
    </div>

    <!-- Internal Transactions Card -->
    <div class="group relative p-6 rounded-xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700 shadow-xl hover:shadow-[0_8px_32px_rgba(59,130,246,0.2)] transition-all duration-300 hover:scale-[1.02] cursor-pointer">
      <div class="absolute inset-0 bg-gradient-to-br from-blue-600/10 to-transparent rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative">
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-sm font-medium text-gray-300">Internal Transactions</h3>
          <div class="p-2 bg-blue-600/20 rounded-lg">
            <svg class="w-5 h-5 text-blue-400" fill="currentColor" viewBox="0 0 24 24">
              <path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"/>
            </svg>
          </div>
        </div>

        <!-- Loading State -->
        <div *ngIf="isLoadingStats" class="animate-pulse">
          <div class="h-8 bg-gray-700 rounded mb-2"></div>
          <div class="h-6 bg-gray-700 rounded w-2/3"></div>
        </div>

        <!-- Loaded Data -->
        <div *ngIf="!isLoadingStats">
          <p class="text-3xl font-bold text-white mb-2">{{ dashboardStats.internalTransactions }}</p>
          <div class="flex items-center space-x-2">
            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium"
                  [ngClass]="getInternalTransactionsBadge().class">
              <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 24 24">
                <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
                <path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
              </svg>
              {{ getInternalTransactionsBadge().text }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- External Transactions Card -->
    <div class="group relative p-6 rounded-xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700 shadow-xl hover:shadow-[0_8px_32px_rgba(147,51,234,0.2)] transition-all duration-300 hover:scale-[1.02] cursor-pointer">
      <div class="absolute inset-0 bg-gradient-to-br from-purple-600/10 to-transparent rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative">
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-sm font-medium text-gray-300">External Transactions</h3>
          <div class="p-2 bg-purple-600/20 rounded-lg">
            <svg class="w-5 h-5 text-purple-400" fill="currentColor" viewBox="0 0 24 24">
              <path d="M9.01 14H2v2h7.01v3L13 15l-3.99-4v3zm5.98-1v-3H22V8h-7.01V5L11 9l3.99 4z"/>
            </svg>
          </div>
        </div>

        <!-- Loading State -->
        <div *ngIf="isLoadingStats" class="animate-pulse">
          <div class="h-8 bg-gray-700 rounded mb-2"></div>
          <div class="h-4 bg-gray-700 rounded w-3/4"></div>
        </div>

        <!-- Loaded Data -->
        <div *ngIf="!isLoadingStats">
          <p class="text-3xl font-bold text-white mb-2">{{ dashboardStats.externalTransactions }}</p>
          <p class="text-xs text-gray-400">Last updated: {{ getLastUpdatedTime() }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Transaction History and Quick Actions -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">

    <!-- Transaction History Graph -->
    <div class="lg:col-span-2 p-6 rounded-xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700 shadow-xl backdrop-blur-sm">
      <div class="flex items-center justify-between mb-6">
        <h3 class="text-lg font-semibold text-white">Transaction History</h3>
        <div class="flex items-center space-x-3">
          <span class="text-sm text-gray-400">Last 7 Days</span>
          <button
            (click)="refreshDashboard()"
            class="p-1 bg-indigo-600/20 rounded-lg hover:bg-indigo-600/30 transition-colors duration-200"
            [class.animate-spin]="isLoadingChart"
            title="Refresh data">
            <svg class="w-4 h-4 text-indigo-400" fill="currentColor" viewBox="0 0 24 24">
              <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Chart Loading State -->
      <div *ngIf="isLoadingChart" class="flex items-center justify-center h-64">
        <div class="flex flex-col items-center space-y-4">
          <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"></div>
          <p class="text-sm text-gray-400">Loading chart data...</p>
        </div>
      </div>

      <!-- Chart Container -->
      <div class="relative" [class.hidden]="isLoadingChart">
        <canvas #transactionChart class="w-full h-64"></canvas>
      </div>
    </div>
    <!-- Quick Actions - Continued from previous artifact -->
    <div class="p-6 rounded-xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700 shadow-xl backdrop-blur-sm">
      <div class="flex items-center justify-between mb-6">
        <h3 class="text-lg font-semibold text-white">Quick Actions</h3>
        <div class="p-1 bg-indigo-600/20 rounded-md">
          <svg class="w-4 h-4 text-indigo-400" fill="currentColor" viewBox="0 0 24 24">
            <path d="M7 2v11h3v9l7-12h-4l3-8z"/>
          </svg>
        </div>
      </div>
      <div class="grid grid-cols-2 gap-4">
        <!-- Create User Button with Router Link -->
        <a routerLink="/agent/manage-users"
           class="group relative p-4 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 transform shadow-lg hover:shadow-[0_8px_32px_rgba(79,70,229,0.3)] block">
          <div class="flex flex-col items-center space-y-2">
            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
            <span class="text-xs font-medium text-white">Create User</span>
          </div>
        </a>

        <!-- Close Account Button with Router Link -->
        <a routerLink="/agent/manage-users"
           class="group relative p-4 bg-gradient-to-r from-red-600 to-red-700 rounded-lg hover:from-red-700 hover:to-red-800 transition-all duration-200 transform shadow-lg hover:shadow-[0_8px_32px_rgba(220,38,38,0.3)] block">
          <div class="flex flex-col items-center space-y-2">
            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"/>
            </svg>
            <span class="text-xs font-medium text-white">Close Account</span>
          </div>
        </a>

        <!-- View Transactions Button with Router Link -->
        <a routerLink="/agent/transactions"
           class="group relative p-4 bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 transform shadow-lg hover:shadow-[0_8px_32px_rgba(37,99,235,0.3)] block">
          <div class="flex flex-col items-center space-y-2">
            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M19.5 3.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2L7.5 3.5L6 2v14H3v3c0 1.66 1.34 3 3 3h12c1.66 0 3-1.34 3-3V2l-1.5 1.5zM19 19c0 .55-.45 1-1 1s-1-.45-1-1v-3H8V5h11v14z"/>
              <path d="M9 7h6v2H9zm0 4h6v2H9z"/>
            </svg>
            <span class="text-xs font-medium text-white">Transactions</span>
          </div>
        </a>

        <!-- View Users Button with Router Link -->
        <a routerLink="/agent/manage-users"
           class="group relative p-4 bg-gradient-to-r from-green-600 to-green-700 rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 transform shadow-lg hover:shadow-[0_8px_32px_rgba(34,197,94,0.3)] block">
          <div class="flex flex-col items-center space-y-2">
            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm4 18v-6h2.5l-2.54-7.63A1.5 1.5 0 0 0 18.54 8H17.5c-.8 0-1.54.37-2.01 1.01l-.7 1.05A6.49 6.49 0 0 0 9.5 8C7.01 8 5 10.01 5 12.5S7.01 17 9.5 17c.17 0 .33-.02.5-.05V22h2v-6.5h1.5V22h2v-6.5H18V22h2zM9.5 15C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10s2.5 1.12 2.5 2.5S10.88 15 9.5 15z"/>
            </svg>
            <span class="text-xs font-medium text-white">View Users</span>
          </div>
        </a>
      </div>
    </div>
  </div>

  <!-- Recent Users Section -->
  <div class="p-6 rounded-xl bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-700 shadow-xl backdrop-blur-sm">
    <div class="flex items-center justify-between mb-6">
      <h3 class="text-lg font-semibold text-white">Recent Users</h3>
      <a routerLink="/agent/manage-users" class="inline-flex items-center text-indigo-400 text-sm hover:text-indigo-300 transition-colors duration-200 group">
        View All
        <svg class="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform duration-200" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>
        </svg>
      </a>
    </div>

    <!-- Loading State for Recent Users -->
    <div *ngIf="isLoadingUsers" class="space-y-3">
      <div *ngFor="let item of [1,2,3,4]" class="animate-pulse flex items-center justify-between p-4 rounded-lg bg-gray-800/50 border border-gray-700/50">
        <div class="flex items-center space-x-4">
          <div class="w-10 h-10 bg-gray-700 rounded-full"></div>
          <div class="space-y-2">
            <div class="h-4 bg-gray-700 rounded w-32"></div>
            <div class="h-3 bg-gray-700 rounded w-48"></div>
          </div>
        </div>
        <div class="space-y-2">
          <div class="h-3 bg-gray-700 rounded w-24"></div>
          <div class="h-5 bg-gray-700 rounded w-16"></div>
        </div>
      </div>
    </div>

    <!-- Recent Users List -->
    <div *ngIf="!isLoadingUsers" class="space-y-3">
      <div *ngFor="let user of recentUsers; trackBy: trackByUserId"
           class="group flex items-center justify-between p-4 rounded-lg bg-gray-800/50 border border-gray-700/50 hover:bg-gray-800/80 hover:border-gray-600 transition-all duration-200 cursor-pointer"
           (click)="onUserCardClick(user)">
        <div class="flex items-center space-x-4">
          <div class="relative">
            <div class="w-10 h-10 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-full flex items-center justify-center">
              <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
              </svg>
            </div>
            <div class="absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-gray-900 flex items-center justify-center"
                 *ngIf="user.status === 'active'">
              <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
            </div>
          </div>
          <div>
            <p class="text-white font-medium">{{ user.name }}</p>
            <p class="text-gray-400 text-sm">{{ user.email }}</p>
          </div>
        </div>
        <div class="text-right">
          <p class="text-gray-300 text-sm">Joined: {{ user.joinDate }}</p>
          <div class="flex items-center space-x-2 mt-1">
            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium"
                  [ngClass]="{
                    'bg-green-600/20 text-green-400 border border-green-600/30': user.status === 'active',
                    'bg-gray-600/20 text-gray-400 border border-gray-600/30': user.status === 'inactive'
                  }">
              {{ user.status | titlecase }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State for Recent Users -->
    <div *ngIf="!isLoadingUsers && recentUsers.length === 0" class="text-center py-8">
      <svg class="w-16 h-16 text-gray-600 mx-auto mb-4" fill="currentColor" viewBox="0 0 24 24">
        <path d="M12 12.75c1.63 0 3.07.39 4.24.9 1.08.48 1.76 1.56 1.76 2.73V18H6v-1.61c0-1.18.68-2.26 1.76-2.73 1.17-.52 2.61-.91 4.24-.91zM4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58A2.01 2.01 0 0 0 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29zM20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm4 3.43c0-.81-.48-1.53-1.22-1.85A6.95 6.95 0 0 0 20 14c-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24v-1.57zM12 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"/>
      </svg>
      <h4 class="text-lg font-medium text-gray-300 mb-2">No recent users</h4>
      <p class="text-gray-500">New users will appear here when they join.</p>
      <a routerLink="/agent/manage-users"
         class="inline-flex items-center mt-4 px-4 py-2 bg-indigo-600/20 text-indigo-400 rounded-lg hover:bg-indigo-600/30 hover:text-indigo-300 transition-all duration-200 text-sm border border-indigo-600/30">
        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
          <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
        </svg>
        Add New User
      </a>
    </div>
  </div>
</div>
